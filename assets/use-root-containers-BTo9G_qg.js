import{r as n,R as m,a as P}from"./index-nNJRqtu-.js";import{s as M,o as d,t as w,E as F,U as C,b as g,T as S,n as h,F as y,k,l as E,C as R}from"./keyboard-DZUzPkaw.js";import{f as T,s as $}from"./hidden-60BgbeDJ.js";function z(e,t,l,r){let a=M(l);n.useEffect(()=>{e=e??window;function s(u){a.current(u)}return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)},[e,t,r])}function H(e){let t=d(e),l=n.useRef(!1);n.useEffect(()=>(l.current=!1,()=>{l.current=!0,w(()=>{l.current&&t()})}),[t])}var L=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(L||{});function J(){let e=n.useRef(0);return F("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}let x=n.createContext(!1);function A(){return n.useContext(x)}function Q(e){return m.createElement(x.Provider,{value:e.force},e.children)}function B(e){let t=A(),l=n.useContext(b),r=h(e),[a,s]=n.useState(()=>{if(!t&&l!==null||y.isServer)return null;let u=r==null?void 0:r.getElementById("headlessui-portal-root");if(u)return u;if(r===null)return null;let o=r.createElement("div");return o.setAttribute("id","headlessui-portal-root"),r.body.appendChild(o)});return n.useEffect(()=>{a!==null&&(r!=null&&r.body.contains(a)||r==null||r.body.appendChild(a))},[a,r]),n.useEffect(()=>{t||l!==null&&s(l.current)},[l,s,t]),a}let U=n.Fragment;function j(e,t){let l=e,r=n.useRef(null),a=g(S(c=>{r.current=c}),t),s=h(r),u=B(r),[o]=n.useState(()=>{var c;return y.isServer?null:(c=s==null?void 0:s.createElement("div"))!=null?c:null}),f=n.useContext(v),p=k();return E(()=>{!u||!o||u.contains(o)||(o.setAttribute("data-headlessui-portal",""),u.appendChild(o))},[u,o]),E(()=>{if(o&&f)return f.register(o)},[f,o]),H(()=>{var c;!u||!o||(o instanceof Node&&u.contains(o)&&u.removeChild(o),u.childNodes.length<=0&&((c=u.parentElement)==null||c.removeChild(u)))}),p?!u||!o?null:P.createPortal(R({ourProps:{ref:a},theirProps:l,defaultTag:U,name:"Portal"}),o):null}let D=n.Fragment,b=n.createContext(null);function G(e,t){let{target:l,...r}=e,a={ref:g(t)};return m.createElement(b.Provider,{value:l},R({ourProps:a,theirProps:r,defaultTag:D,name:"Popover.Group"}))}let v=n.createContext(null);function V(){let e=n.useContext(v),t=n.useRef([]),l=d(s=>(t.current.push(s),e&&e.register(s),()=>r(s))),r=d(s=>{let u=t.current.indexOf(s);u!==-1&&t.current.splice(u,1),e&&e.unregister(s)}),a=n.useMemo(()=>({register:l,unregister:r,portals:t}),[l,r,t]);return[t,n.useMemo(()=>function({children:s}){return m.createElement(v.Provider,{value:a},s)},[a])]}let I=C(j),O=C(G),W=Object.assign(I,{Group:O});function X({defaultContainers:e=[],portals:t,mainTreeNodeRef:l}={}){var r;let a=n.useRef((r=l==null?void 0:l.current)!=null?r:null),s=h(a),u=d(()=>{var o,f,p;let c=[];for(let i of e)i!==null&&(i instanceof HTMLElement?c.push(i):"current"in i&&i.current instanceof HTMLElement&&c.push(i.current));if(t!=null&&t.current)for(let i of t.current)c.push(i);for(let i of(o=s==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?o:[])i!==document.body&&i!==document.head&&i instanceof HTMLElement&&i.id!=="headlessui-portal-root"&&(i.contains(a.current)||i.contains((p=(f=a.current)==null?void 0:f.getRootNode())==null?void 0:p.host)||c.some(N=>i.contains(N))||c.push(i));return c});return{resolveContainers:u,contains:d(o=>u().some(f=>f.contains(o))),mainTreeNodeRef:a,MainTreeNode:n.useMemo(()=>function(){return l!=null?null:m.createElement(T,{features:$.Hidden,ref:a})},[a,l])}}function Y(){let e=n.useRef(null);return{mainTreeNodeRef:e,MainTreeNode:n.useMemo(()=>function(){return m.createElement(T,{features:$.Hidden,ref:e})},[e])}}export{z as E,X as N,H as c,V as e,Q as l,J as n,L as s,W as t,Y as y};
