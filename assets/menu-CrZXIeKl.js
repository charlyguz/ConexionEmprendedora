import{r as m,R as U}from"./index-DRRpwTSH.js";import{o as v,O as N,U as P,b as T,y as j,a as H,u as q,d as F,C as E,I as _,p as G,n as z,c as J,l as w,z as W,A as X,e as d,r as Y,f as A,_ as Z,M as Q,G as V,h as ee}from"./keyboard-C1HsO_kv.js";import{T as te}from"./use-resolve-button-type-CnzAr53l.js";import{F as re,u as ne,c as y,f as ae}from"./calculate-active-index-jbTbozbr.js";let B=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function K(e){var o,a;let r=(o=e.innerText)!=null?o:"",n=e.cloneNode(!0);if(!(n instanceof HTMLElement))return r;let l=!1;for(let t of n.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))t.remove(),l=!0;let i=l?(a=n.innerText)!=null?a:"":r;return B.test(i)&&(i=i.replace(B,"")),i}function ue(e){let o=e.getAttribute("aria-label");if(typeof o=="string")return o.trim();let a=e.getAttribute("aria-labelledby");if(a){let r=a.split(" ").map(n=>{let l=document.getElementById(n);if(l){let i=l.getAttribute("aria-label");return typeof i=="string"?i.trim():K(l).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return K(e).trim()}function ie(e){let o=m.useRef(""),a=m.useRef("");return v(()=>{let r=e.current;if(!r)return"";let n=r.innerText;if(o.current===n)return a.current;let l=ue(r).trim().toLowerCase();return o.current=n,a.current=l,l})}var oe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(oe||{}),le=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(le||{}),se=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(se||{});function $(e,o=a=>a){let a=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=ee(o(e.items.slice()),l=>l.dataRef.current.domRef.current),n=a?r.indexOf(a):null;return n===-1&&(n=null),{items:r,activeItemIndex:n}}let ce={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,o)=>{var a;let r=$(e),n=ae(o,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:l=>l.id,resolveDisabled:l=>l.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeItemIndex:n,activationTrigger:(a=o.trigger)!=null?a:1}},3:(e,o)=>{let a=e.searchQuery!==""?0:1,r=e.searchQuery+o.value.toLowerCase(),n=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+a).concat(e.items.slice(0,e.activeItemIndex+a)):e.items).find(i=>{var t;return((t=i.dataRef.current.textValue)==null?void 0:t.startsWith(r))&&!i.dataRef.current.disabled}),l=n?e.items.indexOf(n):-1;return l===-1||l===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:l,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,o)=>{let a=$(e,r=>[...r,{id:o.id,dataRef:o.dataRef}]);return{...e,...a}},6:(e,o)=>{let a=$(e,r=>{let n=r.findIndex(l=>l.id===o.id);return n!==-1&&r.splice(n,1),r});return{...e,...a,activationTrigger:1}}},O=m.createContext(null);O.displayName="MenuContext";function C(e){let o=m.useContext(O);if(o===null){let a=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,C),a}return o}function de(e,o){return q(o.type,ce,e,o)}let me=m.Fragment;function fe(e,o){let{__demoMode:a=!1,...r}=e,n=m.useReducer(de,{__demoMode:a,menuState:a?0:1,buttonRef:m.createRef(),itemsRef:m.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:l,itemsRef:i,buttonRef:t},s]=n,p=T(o);j([t,i],(R,h)=>{var c;s({type:1}),W(h,X.Loose)||(R.preventDefault(),(c=t.current)==null||c.focus())},l===0);let g=v(()=>{s({type:1})}),b=m.useMemo(()=>({open:l===0,close:g}),[l,g]),I={ref:p};return U.createElement(O.Provider,{value:n},U.createElement(H,{value:q(l,{0:F.Open,1:F.Closed})},E({ourProps:I,theirProps:r,slot:b,defaultTag:me,name:"Menu"})))}let pe="button";function ve(e,o){var a;let r=_(),{id:n=`headlessui-menu-button-${r}`,...l}=e,[i,t]=C("Menu.Button"),s=T(i.buttonRef,o),p=G(),g=v(c=>{switch(c.key){case d.Space:case d.Enter:case d.ArrowDown:c.preventDefault(),c.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:y.First}));break;case d.ArrowUp:c.preventDefault(),c.stopPropagation(),t({type:0}),p.nextFrame(()=>t({type:2,focus:y.Last}));break}}),b=v(c=>{switch(c.key){case d.Space:c.preventDefault();break}}),I=v(c=>{if(Y(c.currentTarget))return c.preventDefault();e.disabled||(i.menuState===0?(t({type:1}),p.nextFrame(()=>{var x;return(x=i.buttonRef.current)==null?void 0:x.focus({preventScroll:!0})})):(c.preventDefault(),t({type:0})))}),R=m.useMemo(()=>({open:i.menuState===0}),[i]),h={ref:s,id:n,type:te(e,i.buttonRef),"aria-haspopup":"menu","aria-controls":(a=i.itemsRef.current)==null?void 0:a.id,"aria-expanded":i.menuState===0,onKeyDown:g,onKeyUp:b,onClick:I};return E({ourProps:h,theirProps:l,slot:R,defaultTag:pe,name:"Menu.Button"})}let Ie="div",ge=N.RenderStrategy|N.Static;function ye(e,o){var a,r;let n=_(),{id:l=`headlessui-menu-items-${n}`,...i}=e,[t,s]=C("Menu.Items"),p=T(t.itemsRef,o),g=z(t.itemsRef),b=G(),I=J(),R=I!==null?(I&F.Open)===F.Open:t.menuState===0;m.useEffect(()=>{let u=t.itemsRef.current;u&&t.menuState===0&&u!==(g==null?void 0:g.activeElement)&&u.focus({preventScroll:!0})},[t.menuState,t.itemsRef,g]),re({container:t.itemsRef.current,enabled:t.menuState===0,accept(u){return u.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});let h=v(u=>{var S,M;switch(b.dispose(),u.key){case d.Space:if(t.searchQuery!=="")return u.preventDefault(),u.stopPropagation(),s({type:3,value:u.key});case d.Enter:if(u.preventDefault(),u.stopPropagation(),s({type:1}),t.activeItemIndex!==null){let{dataRef:f}=t.items[t.activeItemIndex];(M=(S=f.current)==null?void 0:S.domRef.current)==null||M.click()}V(t.buttonRef.current);break;case d.ArrowDown:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:y.Next});case d.ArrowUp:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:y.Previous});case d.Home:case d.PageUp:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:y.First});case d.End:case d.PageDown:return u.preventDefault(),u.stopPropagation(),s({type:2,focus:y.Last});case d.Escape:u.preventDefault(),u.stopPropagation(),s({type:1}),A().nextFrame(()=>{var f;return(f=t.buttonRef.current)==null?void 0:f.focus({preventScroll:!0})});break;case d.Tab:u.preventDefault(),u.stopPropagation(),s({type:1}),A().nextFrame(()=>{Z(t.buttonRef.current,u.shiftKey?Q.Previous:Q.Next)});break;default:u.key.length===1&&(s({type:3,value:u.key}),b.setTimeout(()=>s({type:4}),350));break}}),c=v(u=>{switch(u.key){case d.Space:u.preventDefault();break}}),x=m.useMemo(()=>({open:t.menuState===0}),[t]),D={"aria-activedescendant":t.activeItemIndex===null||(a=t.items[t.activeItemIndex])==null?void 0:a.id,"aria-labelledby":(r=t.buttonRef.current)==null?void 0:r.id,id:l,onKeyDown:h,onKeyUp:c,role:"menu",tabIndex:0,ref:p};return E({ourProps:D,theirProps:i,slot:x,defaultTag:Ie,features:ge,visible:R,name:"Menu.Items"})}let be=m.Fragment;function Re(e,o){let a=_(),{id:r=`headlessui-menu-item-${a}`,disabled:n=!1,...l}=e,[i,t]=C("Menu.Item"),s=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===r:!1,p=m.useRef(null),g=T(o,p);w(()=>{if(i.__demoMode||i.menuState!==0||!s||i.activationTrigger===0)return;let f=A();return f.requestAnimationFrame(()=>{var k,L;(L=(k=p.current)==null?void 0:k.scrollIntoView)==null||L.call(k,{block:"nearest"})}),f.dispose},[i.__demoMode,p,s,i.menuState,i.activationTrigger,i.activeItemIndex]);let b=ie(p),I=m.useRef({disabled:n,domRef:p,get textValue(){return b()}});w(()=>{I.current.disabled=n},[I,n]),w(()=>(t({type:5,id:r,dataRef:I}),()=>t({type:6,id:r})),[I,r]);let R=v(()=>{t({type:1})}),h=v(f=>{if(n)return f.preventDefault();t({type:1}),V(i.buttonRef.current)}),c=v(()=>{if(n)return t({type:2,focus:y.Nothing});t({type:2,focus:y.Specific,id:r})}),x=ne(),D=v(f=>x.update(f)),u=v(f=>{x.wasMoved(f)&&(n||s||t({type:2,focus:y.Specific,id:r,trigger:0}))}),S=v(f=>{x.wasMoved(f)&&(n||s&&t({type:2,focus:y.Nothing}))}),M=m.useMemo(()=>({active:s,disabled:n,close:R}),[s,n,R]);return E({ourProps:{id:r,ref:g,role:"menuitem",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:c,onPointerEnter:D,onMouseEnter:D,onPointerMove:u,onMouseMove:u,onPointerLeave:S,onMouseLeave:S},theirProps:l,slot:M,defaultTag:be,name:"Menu.Item"})}let xe=P(fe),he=P(ve),Se=P(ye),De=P(Re),Ee=Object.assign(xe,{Button:he,Items:Se,Item:De});export{Ee as q};
